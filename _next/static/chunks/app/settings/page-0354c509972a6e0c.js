(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{776:(e,s,t)=>{Promise.resolve().then(t.bind(t,2832))},2832:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),l=t(2115),n=t(5695),i=t(9911),r=t(1910);function c(e){let{onPlaylistsImported:s}=e,[t,n]=(0,l.useState)(!1),[c,o]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[x,p]=(0,l.useState)(null),h=async e=>{e.preventDefault(),n(!1);let s=e.dataTransfer.files;s.length>0&&await b(s[0])},u=async e=>{let s=e.target.files;s&&s.length>0&&await b(s[0])},b=async e=>{if(!e.name.endsWith(".csv")&&!e.name.endsWith(".txt")){p("Please upload a CSV or TXT file");return}o(!0),p(null);try{let t=await j(e),a=await r.R.importPlaylistsFromCSV(t);m(!0),s(a),setTimeout(()=>{m(!1)},3e3)}catch(e){p("Failed to process the file. Please check the format."),console.error("Error processing file:",e)}finally{o(!1)}},j=e=>new Promise((s,t)=>{let a=new FileReader;a.onload=e=>{var a;(null===(a=e.target)||void 0===a?void 0:a.result)?s(e.target.result):t(Error("Failed to read file"))},a.onerror=()=>{t(Error("Error reading file"))},a.readAsText(e)});return(0,a.jsx)("div",{className:"mt-8 w-full max-w-lg mx-auto",children:(0,a.jsx)("div",{className:"\n          border-2 border-dashed p-8 rounded-xl text-center\n          ".concat(t?"border-pink-accent bg-pink-light":"border-pink-secondary","\n          ").concat(c?"opacity-70":"","\n          transition-all duration-200\n        "),onDragOver:e=>{e.preventDefault(),n(!0)},onDragLeave:()=>{n(!1)},onDrop:h,children:c?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 border-4 border-pink-primary border-t-transparent rounded-full animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-pink-dark",children:"Uploading playlist..."})]}):d?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-green-600",children:[(0,a.jsx)(i.CMH,{size:40,className:"mb-2"}),(0,a.jsx)("p",{children:"Playlists imported successfully!"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.HVe,{size:32,className:"text-pink-primary mb-4 mx-auto"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-pink-accent mb-2",children:"Upload Playlist CSV"}),(0,a.jsx)("p",{className:"text-pink-dark mb-4",children:"Drag & drop a CSV file or click to browse"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Format: playlist name, YouTube URL, icon name (optional)"}),(0,a.jsxs)("label",{className:"btn-secondary inline-block cursor-pointer",children:["Browse Files",(0,a.jsx)("input",{type:"file",accept:".csv,.txt",className:"hidden",onChange:u})]}),x&&(0,a.jsxs)("div",{className:"mt-4 text-red-500 flex items-center justify-center",children:[(0,a.jsx)(i.QCr,{className:"mr-1"})," ",x]})]})})})}function o(){let[e,s]=(0,l.useState)([]),[t,o]=(0,l.useState)("general"),[d,m]=(0,l.useState)(!1),[x,p]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),b=(0,l.useRef)(null),j=(0,n.useRouter)();(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/session");u(404===e.status)}catch(e){u(!0)}})()},[]),(0,l.useEffect)(()=>{window.matchMedia("(display-mode: standalone)").matches&&p(!0);let e=e=>{e.preventDefault(),b.current=e,m(!0)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",()=>{p(!0),m(!1),b.current=null}),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),(0,l.useEffect)(()=>{(async()=>{try{let e=await r.R.getPlaylists();s(e)}catch(e){console.error("Failed to load playlists:",e)}})()},[]);let y=()=>{if(h){alert("Authentication is not available in static site mode. Please use the live version of the site to sign in.");return}window.location.href="/api/auth/signin/google?callbackUrl=/settings?tab=account"},f=async()=>{if(!b.current)return;b.current.prompt();let e=await b.current.userChoice;b.current=null,m(!1),"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt")};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-pink-accent flex items-center",children:[(0,a.jsx)(i.Pcn,{className:"mr-2"})," Parent Settings"]}),(0,a.jsxs)("button",{onClick:()=>{j.push("/")},className:"btn-secondary flex items-center",children:[(0,a.jsx)(i.QVr,{className:"mr-2"})," Back to Player"]})]}),(0,a.jsxs)("div",{className:"flex mb-6 border-b border-pink-light",children:[(0,a.jsx)("button",{className:"py-3 px-6 font-semibold ".concat("general"===t?"text-pink-accent border-b-2 border-pink-accent":"text-pink-dark"),onClick:()=>o("general"),children:"General"}),(0,a.jsx)("button",{className:"py-3 px-6 font-semibold ".concat("playlists"===t?"text-pink-accent border-b-2 border-pink-accent":"text-pink-dark"),onClick:()=>o("playlists"),children:"Playlists"}),(0,a.jsx)("button",{className:"py-3 px-6 font-semibold ".concat("account"===t?"text-pink-accent border-b-2 border-pink-accent":"text-pink-dark"),onClick:()=>o("account"),children:"Account"})]}),"general"===t&&(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-pink-primary mb-4",children:"General Settings"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-pink-dark mb-2 font-semibold",children:"PIN Protection"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2 h-5 w-5 accent-pink-primary"}),(0,a.jsx)("span",{children:"Enable PIN for settings access"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-pink-dark mb-2 font-semibold",children:"Interface Settings"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2 h-5 w-5 accent-pink-primary",defaultChecked:!0}),(0,a.jsx)("span",{children:"Show next song"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2 h-5 w-5 accent-pink-primary",defaultChecked:!0}),(0,a.jsx)("span",{children:"Enable animations"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-pink-dark mb-2 font-semibold",children:"Volume Level"}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",defaultValue:"80",className:"w-full accent-pink-primary"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-pink-dark mb-2 font-semibold",children:"Install as App"}),x?(0,a.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,a.jsx)("p",{className:"text-green-700",children:"BittyBox is installed as an app! \uD83C\uDF89"})}):d?(0,a.jsxs)("button",{onClick:f,className:"flex items-center bg-pink-primary text-white py-2 px-4 rounded-md hover:bg-pink-accent transition-all",children:[(0,a.jsx)(i.WCW,{className:"mr-2"})," Install BittyBox"]}):(0,a.jsx)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:(0,a.jsx)("p",{className:"text-gray-700",children:"Visit BittyBox in Chrome or Safari to install it as an app on your device."})})]})]}),"playlists"===t&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"card p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-pink-primary mb-4",children:"Manage Playlists"}),(0,a.jsx)("p",{className:"mb-6 text-pink-dark",children:"Import playlists from a CSV file or manage existing ones."}),(0,a.jsx)(c,{onPlaylistsImported:e=>{s(s=>[...s,...e])}})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-pink-primary mb-4 flex items-center",children:[(0,a.jsx)(i.v5n,{className:"mr-2"})," Current Playlists"]}),e.length>0?(0,a.jsx)("ul",{className:"divide-y divide-pink-light",children:e.map((e,s)=>(0,a.jsxs)("li",{className:"py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.url})]}),(0,a.jsx)("button",{className:"text-pink-accent hover:text-pink-primary",children:"Edit"})]},s))}):(0,a.jsx)("p",{className:"text-center py-8 text-pink-dark",children:"No playlists imported yet. Use the uploader above to add playlists."})]})]}),"account"===t&&(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-pink-primary mb-4",children:"Account Settings"}),(0,a.jsx)("p",{className:"mb-6 text-pink-dark",children:"Connect your Google account to enable YouTube Premium features."}),h?(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(i.__w,{className:"h-5 w-5 text-yellow-400"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,a.jsx)("strong",{children:"Static Site Mode:"})," Authentication with Google is not available in this static deployment. Please use the live version of the site to sign in."]})})]})}),(0,a.jsx)("div",{className:"flex justify-center mb-8",children:(0,a.jsxs)("button",{onClick:y,className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-3 px-6 border border-gray-400 rounded-lg shadow flex items-center opacity-60 cursor-not-allowed",disabled:!0,children:[(0,a.jsx)(i.DSS,{className:"mr-2 text-[#4285F4]"})," Sign in with Google (Disabled in Static Mode)"]})})]}):(0,a.jsx)("div",{className:"flex justify-center mb-8",children:(0,a.jsxs)("button",{onClick:y,className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-3 px-6 border border-gray-400 rounded-lg shadow flex items-center",children:[(0,a.jsx)(i.DSS,{className:"mr-2 text-[#4285F4]"})," Sign in with Google"]})}),(0,a.jsxs)("div",{className:"bg-pink-light/50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold text-pink-dark mb-2",children:"Why connect?"}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-pink-dark space-y-1 text-sm",children:[(0,a.jsx)("li",{children:"Enable ad-free playback with your YouTube Premium account"}),(0,a.jsx)("li",{children:"Access your personal playlists"}),(0,a.jsx)("li",{children:"Better video quality options"}),(0,a.jsx)("li",{children:"Improved reliability"})]})]})]})]})}},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[711,108,831,441,684,358],()=>s(776)),_N_E=e.O()}]);