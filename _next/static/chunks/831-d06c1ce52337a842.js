"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{1910:(t,e,r)=>{r.d(e,{R:()=>c});var i=r(2108);let n=new Map,o=new Map,l="https://www.googleapis.com/youtube/v3",a=["star","heart","magic","cat","dog","icecream"],s=t=>{let e=t.match(/(?:list=)([a-zA-Z0-9_-]+)/);return e?e[1]:null},c={getAuthHeaders:async()=>{let t=await (0,i.getSession)();if(!(null==t?void 0:t.accessToken))throw Error("No authentication token available");return{Authorization:"Bearer ".concat(t.accessToken),"Content-Type":"application/json"}},getDefaultHeaders:()=>({"Content-Type":"application/json"}),fetchFromYouTube:async function(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="key=".concat("AIzaSyBt4j3feciZhYwpvfBPAZGGdu-Srt4Zu_w"),i=t.includes("?")?"&".concat(r):"?".concat(r),n=t.includes("mine=true");try{if(e)try{let e=await c.getAuthHeaders(),r=await fetch("".concat(l).concat(t),{headers:e});if(r.ok)return r.json();let i=await r.json();if(console.warn("Authenticated request failed, falling back to API key:",i),n)throw Error("Cannot access your personal playlists without proper YouTube authorization. Please make sure the YouTube Data API is enabled in your Google Cloud Console and you have granted the necessary permissions.")}catch(e){if(console.warn("Auth error, falling back to API key:",e),n&&e instanceof Error&&t.includes("/playlists"))return console.log("Using popular music playlists instead of user playlists"),{items:[{id:"PLpFAqWzr89nm8ZDNfOxQ6r8sbIVZLZ7yu",snippet:{title:"Kids Songs & Stories",thumbnails:{default:{url:""}}}},{id:"PL2qcTIIqLo7WhNmWKBToK8lOp6deuFa-t",snippet:{title:"Nursery Rhymes",thumbnails:{default:{url:""}}}}]}}let r=t;if(n){if(t.includes("/playlists"))return{items:[{id:"PLpFAqWzr89nm8ZDNfOxQ6r8sbIVZLZ7yu",snippet:{title:"Kids Songs & Stories",thumbnails:{default:{url:""}}}},{id:"PL2qcTIIqLo7WhNmWKBToK8lOp6deuFa-t",snippet:{title:"Nursery Rhymes",thumbnails:{default:{url:""}}}}]};r=t.replace("mine=true","chart=mostPopular")}let a=await fetch("".concat(l).concat(r).concat(i));if(!a.ok){var o;let t=await a.json();throw Error("YouTube API error: ".concat((null===(o=t.error)||void 0===o?void 0:o.message)||a.statusText))}return a.json()}catch(e){if(console.error("YouTube API request failed:",e),t.includes("/playlists"))return{items:[{id:"PLpFAqWzr89nm8ZDNfOxQ6r8sbIVZLZ7yu",snippet:{title:"Kids Songs & Stories",thumbnails:{default:{url:""}}}},{id:"PL2qcTIIqLo7WhNmWKBToK8lOp6deuFa-t",snippet:{title:"Nursery Rhymes",thumbnails:{default:{url:""}}}}]};throw e}},getPlaylists:async()=>{try{let t=(await c.fetchFromYouTube("/playlists?part=snippet&mine=true&maxResults=50")).items.map((t,e)=>{let r={id:t.id,name:t.snippet.title,icon:a[e%a.length],url:"https://www.youtube.com/playlist?list=".concat(t.id)};return n.set(t.id,r),r});return localStorage.setItem("bittybox_playlists",JSON.stringify(t)),t}catch(e){console.error("Error fetching playlists:",e);let t="undefined"!=typeof localStorage?localStorage.getItem("bittybox_playlists"):null;if(t)return JSON.parse(t);return[{id:"PLpFAqWzr89nm8ZDNfOxQ6r8sbIVZLZ7yu",name:"Kids Songs & Stories",icon:"star",url:"https://www.youtube.com/playlist?list=PLpFAqWzr89nm8ZDNfOxQ6r8sbIVZLZ7yu"},{id:"PL2qcTIIqLo7WhNmWKBToK8lOp6deuFa-t",name:"Nursery Rhymes",icon:"heart",url:"https://www.youtube.com/playlist?list=PL2qcTIIqLo7WhNmWKBToK8lOp6deuFa-t"}]}},getPlaylistById:async t=>{if(n.has(t))return n.get(t)||null;try{let e=await c.fetchFromYouTube("/playlists?part=snippet&id=".concat(t));if(e.items&&e.items.length>0){let r=e.items[0],i={id:r.id,name:r.snippet.title,icon:a[0],url:"https://www.youtube.com/playlist?list=".concat(r.id)};return n.set(t,i),i}return null}catch(e){return console.error("Error fetching playlist ".concat(t,":"),e),null}},getSongsForPlaylist:async t=>{if(o.has(t))return o.get(t)||[];try{let e=(await c.fetchFromYouTube("/playlistItems?part=snippet&maxResults=50&playlistId=".concat(t))).items.map((t,e)=>{var r,i,n,o;return{id:t.id,title:t.snippet.title,artist:t.snippet.videoOwnerChannelTitle||"Unknown Artist",thumbnail:(null===(i=t.snippet.thumbnails)||void 0===i?void 0:null===(r=i.high)||void 0===r?void 0:r.url)||(null===(o=t.snippet.thumbnails)||void 0===o?void 0:null===(n=o.default)||void 0===n?void 0:n.url),videoId:t.snippet.resourceId.videoId}});return o.set(t,e),e}catch(e){return console.error("Error fetching songs for playlist ".concat(t,":"),e),[]}},importPlaylistsFromCSV:async t=>{let e=t.split("\n"),r=[],i=await c.getPlaylists(),o=new Set(i.map(t=>t.id));for(let t of e){if(!t.trim())continue;let[e,i,l]=t.split(",").map(t=>t.trim());if(e&&i){let t=s(i);if(!t){console.warn("Invalid YouTube playlist URL: ".concat(i));continue}if(o.has(t))continue;try{let o=await c.fetchFromYouTube("/playlists?part=snippet&id=".concat(t),!1);if(o.items&&o.items.length>0){let s={id:t,name:e||o.items[0].snippet.title,icon:l||a[Math.floor(Math.random()*a.length)],url:i};r.push(s),n.set(t,s)}}catch(e){console.error("Error importing playlist ".concat(t,":"),e)}}}let l=[...i,...r];return localStorage.setItem("bittybox_playlists",JSON.stringify(l)),r},playSong:async t=>{console.log("Playing video ID: ".concat(t))}}},4436:(t,e,r)=>{r.d(e,{k5:()=>u});var i=r(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=i.createContext&&i.createContext(n),l=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach(function(e){var i,n,o;i=t,n=e,o=r[e],(n=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(n))in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t){return e=>i.createElement(p,a({attr:c({},t.attr)},e),function t(e){return e&&e.map((e,r)=>i.createElement(e.tag,c({key:r},e.attr),t(e.child)))}(t.child))}function p(t){var e=e=>{var r,{attr:n,size:o,title:s}=t,u=function(t,e){if(null==t)return{};var r,i,n=function(t,e){if(null==t)return{};var r={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;r[i]=t[i]}return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}(t,l),p=o||e.size||"1em";return e.className&&(r=e.className),t.className&&(r=(r?r+" ":"")+t.className),i.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,n,u,{className:r,style:c(c({color:t.color||e.color},e.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),s&&i.createElement("title",null,s),t.children)};return void 0!==o?i.createElement(o.Consumer,null,t=>e(t)):e(n)}}}]);